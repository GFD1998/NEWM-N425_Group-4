{"ast":null,"code":"var _s = $RefreshSig$();\nimport { settings } from \"../config/config\";\nimport { useState } from \"react\";\nimport { useAuth } from \"./useAuth\";\nconst UseFetch = () => {\n  _s();\n  const [data, setData] = useState(null);\n  const [error, setError] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const {\n    user\n  } = useAuth();\n  const baseURI = settings.baseApiUrl + '/students';\n  const abortCont = new AbortController();\n  const signal = abortCont.signal;\n  const handleResponse = promise => {\n    promise.then(async response => {\n      if (!response.ok) {\n        const error = await response.json();\n        return Promise.reject(error);\n      }\n      return response.json();\n    }).then(data => {\n      setIsLoading(false);\n      setError(null);\n      setData(data);\n    }).catch(err => {\n      setIsLoading(false);\n      if (err.name === 'AbortError') {\n        setError('Fetch aborted');\n      } else {\n        setError(JSON.stringify(err));\n      }\n    });\n  };\n  const getAll = function () {\n    let id = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    setIsLoading(true);\n    const url = !id ? baseURI : baseURI + \"/\" + id;\n    const promise = fetch(url, {\n      method: 'GET',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'Authorization': \"Bearer \" + user.jwt\n      },\n      signal: signal\n    });\n    handleResponse(promise);\n  };\n  const get = $id => {\n    getAll($id);\n  };\n  const create = body => {\n    setIsLoading(true);\n    const promise = fetch(baseURI, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'Authorization': \"Bearer \" + user.jwt\n      },\n      body: JSON.stringify(body)\n    });\n    handleResponse(promise);\n  };\n  const update = body => {\n    setIsLoading(true);\n    const promise = fetch(baseURI + \"/\" + body.id, {\n      method: 'PUT',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'Authorization': \"Bearer \" + user.jwt\n      },\n      body: JSON.stringify(body)\n    });\n    handleResponse(promise);\n  };\n  const remove = id => {\n    const promise = fetch(baseURI + \"/\" + id, {\n      method: 'DELETE',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'Authorization': \"Bearer \" + user.jwt\n      }\n    });\n    handleResponse(promise);\n  };\n  const search = query => {\n    const promise = fetch(baseURI + \"?q=\" + query, {\n      method: 'GET',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'Authorization': \"Bearer \" + user.jwt\n      },\n      signal: signal\n    });\n    handleResponse(promise);\n  };\n  return {\n    error,\n    isLoading,\n    data,\n    get,\n    getAll,\n    update,\n    remove,\n    create,\n    search\n  };\n};\n_s(UseFetch, \"bMWIIQEvYnjF4OBxNMTR4LyEHt4=\", false, function () {\n  return [useAuth];\n});\n_c = UseFetch;\nexport default UseFetch;\nvar _c;\n$RefreshReg$(_c, \"UseFetch\");","map":{"version":3,"names":["settings","useState","useAuth","UseFetch","_s","data","setData","error","setError","isLoading","setIsLoading","user","baseURI","baseApiUrl","abortCont","AbortController","signal","handleResponse","promise","then","response","ok","json","Promise","reject","catch","err","name","JSON","stringify","getAll","id","arguments","length","undefined","url","fetch","method","headers","jwt","get","$id","create","body","update","remove","search","query","_c","$RefreshReg$"],"sources":["C:/XAMPP/htdocs/projects/NEWM-N425_Group-4/mcdonald-client/src/services/useFetch.js"],"sourcesContent":["import {settings} from \"../config/config\";\r\nimport {useState} from \"react\";\r\nimport {useAuth} from \"./useAuth\";\r\n\r\nconst UseFetch = () => {\r\n    const [data, setData] = useState(null);\r\n    const [error, setError] = useState(null);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const {user} = useAuth();\r\n    const baseURI = settings.baseApiUrl + '/students';\r\n    const abortCont = new AbortController();\r\n    const signal = abortCont.signal;\r\n    const handleResponse = (promise) => {\r\n        promise\r\n            .then ( async response => {\r\n                if (!response.ok) {\r\n                    const error = await response.json();\r\n                    return Promise.reject(error);\r\n                }\r\n            return response.json();\r\n        })\r\n            .then(data => {\r\n                setIsLoading(false);\r\n                setError(null);\r\n                setData(data);\r\n            })\r\n            .catch(err => {\r\n                setIsLoading(false);\r\n                if (err.name === 'AbortError') {\r\n                    setError('Fetch aborted');\r\n                } else {\r\n                    setError(JSON.stringify(err));\r\n                }\r\n            });\r\n    }\r\n    const getAll = (id = null) => {\r\n        setIsLoading(true);\r\n        const url = (!id) ? baseURI : baseURI + \"/\" + id;\r\n        const promise = fetch(url, {\r\n            method: 'GET',\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json',\r\n                'Authorization': \"Bearer \" + user.jwt\r\n            },\r\n            signal: signal\r\n        });\r\n        handleResponse(promise);\r\n    }\r\n    const get = ($id) => {\r\n        getAll($id);\r\n    }\r\n    const create = (body) => {\r\n        setIsLoading(true);\r\n        const promise = fetch(baseURI, {\r\n            method: 'POST',\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json',\r\n                'Authorization': \"Bearer \" + user.jwt\r\n            },\r\n            body: JSON.stringify(body)\r\n        });\r\n        handleResponse(promise);\r\n    }\r\n    const update = (body) => {\r\n        setIsLoading(true);\r\n        const promise = fetch(baseURI + \"/\" + body.id, {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json',\r\n                'Authorization': \"Bearer \" + user.jwt\r\n            },\r\n            body: JSON.stringify(body)\r\n        })\r\n        handleResponse(promise);\r\n    }\r\n    const remove = (id) => {\r\n        const promise = fetch(baseURI + \"/\" + id, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json',\r\n                'Authorization': \"Bearer \" + user.jwt\r\n            }\r\n        })\r\n        handleResponse(promise);\r\n    }\r\n    const search = (query) => {\r\n        const promise = fetch(baseURI + \"?q=\" + query, {\r\n            method: 'GET',\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json',\r\n                'Authorization': \"Bearer \" + user.jwt\r\n            },\r\n            signal: signal\r\n        });\r\n        handleResponse(promise);\r\n    }\r\n\r\n\r\n\r\n    \r\n\r\n    return {error, isLoading, data, get, getAll, update, remove, create, search};\r\n}\r\nexport default UseFetch;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}